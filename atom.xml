<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
 
 <title>å¥”è·‘çš„èš‚èš</title>
 <link href="http://wangtaox.github.io/atom.xml" rel="self"/>
 <link href="http://wangtaox.github.io"/>
 <updated>2016-11-17T16:42:17+08:00</updated>
 <id>http://wangtaox.github.io/</id>
 <author>
   <name>TaoWang</name>
 </author>

 
 <entry>
   <title>å†…æ ¸é€‰é¡¹tcp_tw_recycleåŸç†</title>
   <link href="http://wangtaox.github.io/2016/10/14/tcp-tw-recycle.html"/>
   <updated>2016-10-14T00:00:00+08:00</updated>
   <id>http://wangtaox.github.io/2016/10/14/tcp-tw-recycle</id>
   <content type="html">&lt;h3&gt;why TIME_WAIT state ï¼Ÿ&lt;/h3&gt;

&lt;p&gt;åœ¨TCPçŠ¶æ€æœºä¸­ï¼ŒTIME_WAITçŠ¶æ€ä¸»è¦ç”¨æ¥é¿å…å»¶è¿Ÿçš„æ—§è¿æ¥çš„æ•°æ®è¢«ç›¸åŒçš„æ–°è¿æ¥(è¿æ¥ç›¸åŒæŒ‡SRC IP:PORT DST IP:PORTç›¸åŒ)æ‰€æ¥æ”¶ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;http://www.isi.edu/touch/pubs/infocomm99/infocomm99-web/fig1.gif&quot; alt=&quot;time_wait&quot; /&gt;&lt;/p&gt;

&lt;p&gt;å¦‚ä¸Šå›¾æ‰€ç¤º:&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;è¿æ¥&amp;lt;(IP a : Port p) - (IP b : Port q)&gt;æ–­å¼€&lt;/li&gt;
&lt;li&gt;æ–°è¿æ¥&amp;lt;(IP a : Port p) - (IP b : Port q)&gt;å»ºç«‹&lt;/li&gt;
&lt;li&gt;ä¸Šæ¬¡æ–­å¼€è¿æ¥çš„æ•°æ®åœ¨ç½‘ç»œä¸­å»¶è¿Ÿå¹¶åœ¨æ–°è¿æ¥å»ºç«‹ååˆ°æ¥ï¼Œè¿™æ ·çš„æ•°æ®åº”è¯¥æ˜¯é”™è¯¯å¹¶è¢«é¿å…çš„&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;TIME_WAITçŠ¶æ€å°±æ˜¯æ¥è§£å†³ä¸Šé¢è¿™æ ·çš„é—®é¢˜çš„ï¼Œä¸€èˆ¬TIME_WAITçŠ¶æ€ç­‰å¾…çš„æ—¶é—´ç­‰äº2MSL(æœ€å¤§æŠ¥æ–‡å­˜æ´»æ—¶é—´çš„2å€)ï¼Œè¿™æ ·å°±å¯ä»¥ç¡®ä¿æ—§çš„å»¶è¿Ÿçš„æŠ¥æ–‡ä¸è¢«æ–°è¿æ¥æ‰€æ¥æ”¶åˆ°ã€‚&lt;/p&gt;

&lt;p&gt;åœ¨Linuxå…·ä½“å®ç°åè®®æ ˆæ—¶ï¼ŒTIME_WAITçŠ¶æ€æ˜¯ä¿å­˜åœ¨æ¯ä¸ªè¿æ¥ç›¸å…³çš„æ•°æ®(ç»“æ„TCBå³TCP control blockï¼Œä¿å­˜è¯¥è¿æ¥æ‰€æœ‰çš„çŠ¶æ€æ•°æ®)ä¸­çš„ï¼Œå› æ­¤åœ¨ä¸€äº›é«˜æ€§èƒ½çš„æœåŠ¡å™¨ä¸Šï¼Œå°±å¸Œæœ›è¿™æ ·çš„TIME_WAITçŠ¶æ€å¯ä»¥å°½é‡çš„å°‘(èŠ‚çœæœåŠ¡å™¨å†…å­˜ï¼Œå¹¶ä¸”å¯ä»¥å¿«é€Ÿçš„ç«¯å£é‡ç”¨ä»¥å»ºç«‹æ–°è¿æ¥)ï¼Œæ‰€ä»¥&lt;a href=&quot;https://tools.ietf.org/html/rfc6191#page-3&quot;&gt;RFC6191&lt;/a&gt;æå‡ºäº†ä¸€ç§åŸºäºTCP timestampçš„æ–¹æ³•æ¥è¿›è¡Œå¿«é€Ÿçš„TIME_WAITçŠ¶æ€å›æ”¶ã€‚&lt;/p&gt;

&lt;p&gt;RFC6191åœ¨æ€è·¯ä¸Šå€Ÿé‰´äº†RFC1122ï¼Œå¯¹æ¯”RFC1122é€šè¿‡åºåˆ—å·çš„é€’å¢æ€§ï¼ŒRFC6191åˆ™é€šè¿‡TCP timestampæ¥è¿›è¡Œå¿«é€Ÿçš„TIME_WAITçŠ¶æ€å›æ”¶ï¼Œå…·ä½“æ€è·¯å¤§è‡´æ˜¯å½“ä¸€ä¸ªæ–°è¿æ¥(SRC IP, SRC PORT, DST IP, DST PORT)åˆ°æ¥æ—¶ï¼Œå¦‚æœæœ‰ç›¸åŒçš„è¿æ¥å¤„äºTIME_WAITçŠ¶æ€ï¼Œä¸”æ–°è¿æ¥çš„SYNæŠ¥æ–‡çš„timestampè¦å¤§äºæœ€è¿‘è¯¥è¿æ¥ä¸Šçš„timestampæ—¶ï¼Œå¯ä»¥æ¥å—è¯¥è¿æ¥å»ºç«‹çš„è¯·æ±‚ã€‚å³è¦æ±‚äº†æ¥è‡ªåŒä¸€ä¸ªè¿æ¥(4å…ƒç»„)çš„timestampæ˜¯å•è°ƒé€’å¢çš„ã€‚&lt;/p&gt;

&lt;h3&gt;tcp_tw_recycleå†…æ ¸å®ç°&lt;/h3&gt;

&lt;p&gt;åœ¨å†…æ ¸ä¸­ï¼Œå½“å¼€å¯äº†tcp_tw_recycleé€‰é¡¹æ—¶ï¼Œå³:&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;shell&quot;&gt;$ echo 1 &amp;gt; /proc/sys/net/ipv4/tcp_tw_recycle
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;å†…æ ¸TCPè¿æ¥å»ºç«‹æ—¶å‡½æ•°(æœªè´´å®Œ):&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;c&quot;&gt;1440 int tcp_v4_conn_request(struct sock *sk, struct sk_buff *skb)
1441 {
1442         struct tcp_options_received tmp_opt;
1443         struct request_sock *req;
1444         struct inet_request_sock *ireq;
1445         struct tcp_sock *tp = tcp_sk(sk);
1446         struct dst_entry *dst = NULL;
1447         __be32 saddr = ip_hdr(skb)-&amp;gt;saddr;
1448         __be32 daddr = ip_hdr(skb)-&amp;gt;daddr;
1449         __u32 isn = TCP_SKB_CB(skb)-&amp;gt;when;
1450         bool want_cookie = false;
1451         struct flowi4 fl4;
1452         struct tcp_fastopen_cookie foc = { .len = -1 };
1453         struct tcp_fastopen_cookie valid_foc = { .len = -1 };
1454         struct sk_buff *skb_synack;
1455         int do_fastopen;
1456
1457         /* Never answer to SYNs send to broadcast or multicast */
1458         if (skb_rtable(skb)-&amp;gt;rt_flags &amp;amp; (RTCF_BROADCAST | RTCF_MULTICAST))
1459                 goto drop;
1460
1461         /* TW buckets are converted to open requests without
1462  * limitations, they conserve resources and peer is
1463  * evidently real one.
1464  */
1465         if (inet_csk_reqsk_queue_is_full(sk) &amp;amp;&amp;amp; !isn) {
1466                 want_cookie = tcp_syn_flood_action(sk, skb, &quot;TCP&quot;);
1467                 if (!want_cookie)
1468                         goto drop;
1469         }
1470
1471         /* Accept backlog is full. If we have already queued enough
1472  * of warm entries in syn queue, drop request. It is better than
1473  * clogging syn queue with openreqs with exponentially increasing
1474  * timeout.
1475  */
1476         if (sk_acceptq_is_full(sk) &amp;amp;&amp;amp; inet_csk_reqsk_queue_young(sk) &amp;gt; 1) {
1477                 NET_INC_STATS_BH(sock_net(sk), LINUX_MIB_LISTENOVERFLOWS);
1478                 goto drop;
1479         }
1480
1481         req = inet_reqsk_alloc(&amp;amp;tcp_request_sock_ops);
1482         if (!req)
1483                 goto drop;
1484
1485 #ifdef CONFIG_TCP_MD5SIG
1486         tcp_rsk(req)-&amp;gt;af_specific = &amp;amp;tcp_request_sock_ipv4_ops;
1487 #endif
1488
1489         tcp_clear_options(&amp;amp;tmp_opt);
1490         tmp_opt.mss_clamp = TCP_MSS_DEFAULT;
1491         tmp_opt.user_mss  = tp-&amp;gt;rx_opt.user_mss;
1492         tcp_parse_options(skb, &amp;amp;tmp_opt, 0, want_cookie ? NULL : &amp;amp;foc);
1493
1494         if (want_cookie &amp;amp;&amp;amp; !tmp_opt.saw_tstamp)
1495                 tcp_clear_options(&amp;amp;tmp_opt);
1496
1497         tmp_opt.tstamp_ok = tmp_opt.saw_tstamp;
1498         tcp_openreq_init(req, &amp;amp;tmp_opt, skb);
1499
1500         ireq = inet_rsk(req);
1501         ireq-&amp;gt;loc_addr = daddr;
1502         ireq-&amp;gt;rmt_addr = saddr;
1503         ireq-&amp;gt;no_srccheck = inet_sk(sk)-&amp;gt;transparent;
1504         ireq-&amp;gt;opt = tcp_v4_save_options(skb);
1505
1506         if (security_inet_conn_request(sk, skb, req))
1507                 goto drop_and_free;
1508
1509         if (!want_cookie || tmp_opt.tstamp_ok)
1510                 TCP_ECN_create_request(req, skb, sock_net(sk));
1511
1512         if (want_cookie) {
1513                 isn = cookie_v4_init_sequence(sk, skb, &amp;amp;req-&amp;gt;mss);
1514                 req-&amp;gt;cookie_ts = tmp_opt.tstamp_ok;
1515         } else if (!isn) {
1516                 /* VJ&#39;s idea. We save last timestamp seen
1517  * from the destination in peer table, when entering
1518  * state TIME-WAIT, and check against it before
1519  * accepting new connection request.
1520  *
1521  * If &quot;isn&quot; is not zero, this request hit alive
1522  * timewait bucket, so that all the necessary checks
1523  * are made in the function processing timewait state.
1524  */
1525                 if (tmp_opt.saw_tstamp &amp;amp;&amp;amp;
1526                     tcp_death_row.sysctl_tw_recycle &amp;amp;&amp;amp;
1527                     (dst = inet_csk_route_req(sk, &amp;amp;fl4, req)) != NULL &amp;amp;&amp;amp;
1528                     fl4.daddr == saddr) {
1529                         if (!tcp_peer_is_proven(req, dst, true)) {
1530                                 NET_INC_STATS_BH(sock_net(sk), LINUX_MIB_PAWSPASSIVEREJECTED);
1531                                 goto drop_and_release;
1532                         }
1533                 }
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;å¯ä»¥çœ‹å‡ºåœ¨1525è¡Œæ¡ä»¶åˆ¤æ–­å¤„ï¼Œå¼€å¯TCP_TW_RECYCLEæ—¶ï¼Œä¼šè¿›å…¥å‡½æ•°tcp_peer_is_provenï¼Œå³åˆ¤æ–­æ—¶é—´æˆ³çš„é€’å¢æ€§ï¼Œè¯¥å‡½æ•°ä»£ç å¦‚ä¸‹:&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;c&quot;&gt;536 bool tcp_peer_is_proven(struct request_sock *req, struct dst_entry *dst, bool paws_check)
537 {
538         struct tcp_metrics_block *tm;
539         bool ret;
540
541         if (!dst)
542                 return false;
543
544         rcu_read_lock();
545         tm = __tcp_get_metrics_req(req, dst);
546         if (paws_check) {
547                 if (tm &amp;amp;&amp;amp;
548                     (u32)get_seconds() - tm-&amp;gt;tcpm_ts_stamp &amp;lt; TCP_PAWS_MSL &amp;amp;&amp;amp;
549                     (s32)(tm-&amp;gt;tcpm_ts - req-&amp;gt;ts_recent) &amp;gt; TCP_PAWS_WINDOW)
550                         ret = false;
551                 else
552                         ret = true;
553         } else {
554                 if (tm &amp;amp;&amp;amp; tcp_metric_get(tm, TCP_METRIC_RTT) &amp;amp;&amp;amp; tm-&amp;gt;tcpm_ts_stamp)
555                         ret = true;
556                 else
557                         ret = false;
558         }
559         rcu_read_unlock();
560
561         return ret;
562 }
563 EXPORT_SYMBOL_GPL(tcp_peer_is_proven);
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;åœ¨549è¡Œ (s32)(tm-&gt;tcpm_ts - req-&gt;ts_recent) &gt; TCP_PAWS_WINDOW) å³ä¸ºå½“å‰æ—¶é—´å°äºæœ€è¿‘è¯¥è¿æ¥ä¸Šçš„æ—¶é—´æˆ³(è¿™ä¸ªæ—¶é—´æˆ³å†…æ ¸ä¼šè®°å½•çš„)ï¼Œç„¶åè¿”å›äº†falseï¼Œè¿æ¥å»ºç«‹å°±ä¼šå¤±è´¥ã€‚&lt;/p&gt;

&lt;h3&gt;NAT ä¸ tcp_tw_recycle&lt;/h3&gt;

&lt;p&gt;å½“è¿æ¥é€šè¿‡NATæœºå™¨è½¬æ¢åˆ°è¾¾å¼€å¯äº†TCP_TW_RECYCLEçš„æœºå™¨ä¸Šæ—¶ï¼Œç”±äºNATæœºå™¨åœ¨åšè½¬æ¢æ—¶å¹¶ä¸ä¼šä¿®æ”¹åè®®ä¸­çš„æ—¶é—´æˆ³ï¼Œå› æ­¤æ¥è‡ªä¸åŒæœºå™¨çš„è¯·æ±‚çš„æ—¶é—´æˆ³ä¸ä¸€å®šæ˜¯å•è°ƒé€’å¢çš„ï¼Œæ ¹æ®ä¸Šè¿°åŸç†ï¼Œæ‰€ä»¥å°±ä¼šå‡ºç°è¿æ¥å»ºç«‹å¤±è´¥çš„æƒ…å†µã€‚&lt;/p&gt;

&lt;p&gt;æ‰€ä»¥ä¸€èˆ¬æœºå™¨éƒ½æ˜¯å…³é—­äº†è¯¥é€‰é¡¹çš„ï¼Œä»¥é¿å…å‡ºç°è¿æ¥å»ºç«‹å¤±è´¥çš„æƒ…å†µã€‚&lt;/p&gt;

&lt;h3&gt;å‚è€ƒèµ„æ–™&lt;/h3&gt;

&lt;p&gt;&lt;a href=&quot;http://www.isi.edu/touch/pubs/infocomm99/infocomm99-web/&quot;&gt;http://www.isi.edu/touch/pubs/infocomm99/infocomm99-web/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://tools.ietf.org/html/rfc1122#section-4.2.2.13&quot;&gt;https://tools.ietf.org/html/rfc1122#section-4.2.2.13&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://tools.ietf.org/html/rfc6191#page-3&quot;&gt;https://tools.ietf.org/html/rfc6191#page-3&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://www.cnblogs.com/lulu/p/4149312.html&quot;&gt;http://www.cnblogs.com/lulu/p/4149312.html&lt;/a&gt;&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>React higher order component</title>
   <link href="http://wangtaox.github.io/2016/09/26/react-hoc.html"/>
   <updated>2016-09-26T00:00:00+08:00</updated>
   <id>http://wangtaox.github.io/2016/09/26/react-hoc</id>
   <content type="html">&lt;h3&gt;ä»€ä¹ˆæ˜¯Higher Order Component ?&lt;/h3&gt;

&lt;p&gt;HOC(Higher Order Component)ä¸»è¦ç”¨æ¥å°è£…(å¢å¼º)å…¶å®ƒç»„ä»¶ï¼Œå³ä¸€ä¸ªç»„ä»¶å°è£…äº†å¦å¤–ä¸€ä¸ªç»„ä»¶ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;javascript&quot;&gt;const MyComponent = (props) =&amp;gt; {}
   if (props.data) {
       return (
            &amp;lt;h1&amp;gt;Waiting&amp;lt;/h1&amp;gt;
       );
   }

   return &amp;lt;div&amp;gt;{props.data}&amp;lt;/div&amp;gt;;
}

const Enhance = (WrappedComponent) =&amp;gt; class extends Component {
    constructor() {
        this.state = { data: null }; 
    }

    componentDidMount() {
        this.setState({ data: &quot;Hello&quot;});
    }

    render() {
        return &amp;lt;WrappedComponent {...this.props} data={this.state.data}/&amp;gt;
    }
}

export default Enhance(MyComponent);
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;å¦‚ä¸Šè¿°ä»£ç æ‰€ç¤ºï¼ŒEnhance(MyComponent)å°±è¿”å›äº†ä¸€ä¸ªHOCï¼Œè¿™ä¸ªè¿”å›çš„ç»„ä»¶å°è£…äº†MyComponentï¼Œå› æ­¤ï¼ŒHOCå¯ä»¥å®Œæˆä»¥ä¸‹ä¸€äº›å¸¸ç”¨çš„æ“ä½œï¼Œæ¯”å¦‚: æ“ä½œprops, å°è£…é€šç”¨çš„æ ·å¼ç­‰&lt;/p&gt;

&lt;h3&gt;æ“ä½œprops&lt;/h3&gt;

&lt;p&gt;ä¾‹å¦‚å¦‚ä¸‹ä»£ç : åˆ¤æ–­ç™»å½•ç”¨æˆ·&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;javascript&quot;&gt;const WithLoginUser = (WrappedComponent) =&amp;gt; (props) =&amp;gt; {
    const user = getCurrentLoginUser();
    return (
        &amp;lt;WrappedComponent {...props} user={user}/&amp;gt;
    )
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;æ ¹æ®propså†…å®¹æ¡ä»¶æ¸²æŸ“&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;javascript&quot;&gt;const ConditionRender = (WrappedComponent) =&amp;gt; (props) =&amp;gt; {
    if (props.data !== null) {
        return null;
    } else {
        return &amp;lt;WrappedComponent {...props} /&amp;gt;
    }
}
&lt;/code&gt;&lt;/pre&gt;

&lt;h3&gt;å°è£…é€šç”¨çš„æ ·å¼&lt;/h3&gt;

&lt;p&gt;å¯ä»¥åšä¸€äº›é€šç”¨æ ·å¼çš„å¤„ç†&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;javascript&quot;&gt;const StyledComponent = (WrappedComponent) =&amp;gt; (props) =&amp;gt; {
    return (
        &amp;lt;div className=&quot;general-style&quot;&amp;gt;
            &amp;lt;WrappedComponent {...props} /&amp;gt;
        &amp;lt;/div&amp;gt;
    )
}
&lt;/code&gt;&lt;/pre&gt;

&lt;h3&gt;å‚è€ƒææ–™&lt;/h3&gt;

&lt;ol&gt;
&lt;li&gt;&lt;a href=&quot;https://medium.com/@housecor/react-stateless-functional-components-nine-wins-you-might-have-overlooked-997b0d933dbc?swoff=true#.y0olcg5dt&quot;&gt;https://medium.com/@housecor/react-stateless-functional-components-nine-wins-you-might-have-overlooked-997b0d933dbc?swoff=true#.y0olcg5dt&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://engineering.blogfoster.com/higher-order-components-theory-and-practice/&quot;&gt;http://engineering.blogfoster.com/higher-order-components-theory-and-practice/&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://facebook.github.io/react/&quot;&gt;https://facebook.github.io/react/&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;

</content>
 </entry>
 
 <entry>
   <title>TCP TIME_WAITçŠ¶æ€ä¸tcp_tw_recycle</title>
   <link href="http://wangtaox.github.io/2016/09/02/tcp-time-wait.html"/>
   <updated>2016-09-02T00:00:00+08:00</updated>
   <id>http://wangtaox.github.io/2016/09/02/tcp-time-wait</id>
   <content type="html">&lt;p&gt;æœ€è¿‘é‡åˆ°äº†ä¸€ä¸ªä¸linuxå†…æ ¸é€‰é¡¹tcp_tw_recycleçš„å‘, åœ¨æ­¤è®°å½•ä¸€ä¸‹ç›¸å…³çŸ¥è¯†ç‚¹ã€‚&lt;/p&gt;

&lt;h3&gt;TIME_WAITçŠ¶æ€çš„ä½œç”¨&lt;/h3&gt;

&lt;p&gt;å¦‚å›¾ï¼ŒTIME_WAITçŠ¶æ€ä¸»è¦ç”¨æ¥å¤„ç†æ•°æ®çš„é”™è¯¯ä¼ è¾“ï¼Œæ¯”å¦‚ä¸€ä¸ªè¿æ¥ï¼Œåœ¨æ–­å¼€åï¼Œåˆæ–°å»ºäº†ç›¸åŒçš„è¿æ¥(IPå’Œç«¯å£çš„å››å…ƒç»„)ï¼Œä¸Šä¸€æ¬¡æ–­å¼€çš„è¿æ¥ä¸­æŸäº›æ•°æ®å¯èƒ½ç”±äºç½‘ç»œæ‹¥å¡è€Œå»¶è¿Ÿåˆ°æ¥ï¼Œæ˜¾ç„¶å»¶è¿Ÿçš„æ•°æ®ä¸æ˜¯å±äºè¿™ä¸€ä¸ªæ–°å»ºçš„è¿æ¥çš„ï¼Œä¸ºäº†é˜²æ­¢è¿™ç§æƒ…å†µï¼ŒTIME_WAITçŠ¶æ€ä¼šç­‰å¾…2&lt;a href=&quot;https://en.wikipedia.org/wiki/Maximum_segment_lifetime&quot;&gt;MSL&lt;/a&gt;ï¼Œå³ä¸¤å€æœ€å¤§æŠ¥æ–‡ç”Ÿå­˜æ—¶é—´ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/media/files/2016/09/02/Time_wait.svg&quot; alt=&quot;time_wait&quot; /&gt;&lt;/p&gt;

&lt;p&gt;å¦‚å›¾çš„é»„è‰²ç®­å¤´æ‰€ä»£è¡¨çš„å³ä¸ºä¸æ­£ç¡®çš„æ•°æ®ã€‚&lt;/p&gt;

&lt;h3&gt;tcp_tw_recycle&lt;/h3&gt;

&lt;p&gt;å½“åœ¨è¿æ¥é‡è¾ƒå¤§çš„æœåŠ¡å™¨ä¸Šæ—¶ï¼Œå¦‚æœå¤§é‡çš„TIME_WAITçŠ¶æ€ä¼šå½±å“æœåŠ¡å™¨çš„æ€§èƒ½ï¼Œå› æ­¤ï¼Œ&lt;a href=&quot;https://tools.ietf.org/html/rfc6191#page-3&quot;&gt;RFC6191&lt;/a&gt;æå‡ºä½¿ç”¨&lt;a href=&quot;https://en.wikipedia.org/wiki/Transmission_Control_Protocol#TCP_timestamps&quot;&gt;TCP Timestamp&lt;/a&gt;æ¥å‡å°‘è¿™æ ·çš„TIME_WAITçŠ¶æ€ã€‚&lt;/p&gt;

&lt;p&gt;åœ¨å†…æ ¸ä¸­çš„ä»£ç å®ç°å¦‚ä¸‹:&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;c&quot;&gt;536 bool tcp_peer_is_proven(struct request_sock *req, struct dst_entry *dst, bool paws_check)
537 {
538         struct tcp_metrics_block *tm;
539         bool ret;
540
541         if (!dst)
542                 return false;
543
544         rcu_read_lock();
545         tm = __tcp_get_metrics_req(req, dst);
546         if (paws_check) {
547                 if (tm &amp;amp;&amp;amp;
548                     (u32)get_seconds() - tm-&amp;gt;tcpm_ts_stamp &amp;lt; TCP_PAWS_MSL &amp;amp;&amp;amp;
549                     (s32)(tm-&amp;gt;tcpm_ts - req-&amp;gt;ts_recent) &amp;gt; TCP_PAWS_WINDOW)
550                         ret = false;
551                 else
552                         ret = true;
553         } else {
554                 if (tm &amp;amp;&amp;amp; tcp_metric_get(tm, TCP_METRIC_RTT) &amp;amp;&amp;amp; tm-&amp;gt;tcpm_ts_stamp)
555                         ret = true;
556                 else
557                         ret = false;
558         }
559         rcu_read_unlock();
560
561         return ret;
562 }
563 EXPORT_SYMBOL_GPL(tcp_peer_is_proven);
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;åœ¨ä»£ç ä¸­ï¼Œ547-552è¡Œä¸»è¦ç¡®ä¿åœ¨TCP_PAWS_MSLæ—¶é—´å†…è¯·æ±‚çš„æ—¶é—´æˆ³æ˜¯é€’å¢çš„(TCP_PAWS_WINDOWä¸º1)ã€‚&lt;/p&gt;

&lt;h3&gt;ipatbles NAT&lt;/h3&gt;

&lt;p&gt;æ‰€ä»¥å½“åç«¯æœºå™¨åœ¨NATåé¢æ—¶ï¼Œç”±äºNATå¹¶æ²¡æœ‰æ”¹æ—¶é—´æˆ³ï¼Œè¿æ¥ä¸­çš„æ—¶é—´æˆ³æ¥è‡ªä¸åŒçš„æœºå™¨ï¼Œæ—¶é—´æˆ³(æœºå™¨å¯åŠ¨æ—¶é—´)ä¸ä¸€å®šæ˜¯é€’å¢çš„ï¼Œæ‰€ä»¥å°±ä¼šå‡ºç°åç«¯æœºå™¨drop SYNåŒ…çš„æƒ…å†µ.&lt;/p&gt;

&lt;p&gt;åœ¨NATåçš„æœºå™¨ï¼Œå…³é—­tcp_tw_recycleæ£€æŸ¥å³å¯ï¼Œä¸€èˆ¬è¯¥é€‰é¡¹ä¸ºdisableçš„ã€‚&lt;/p&gt;

&lt;h3&gt;å‚è€ƒææ–™&lt;/h3&gt;

&lt;ol&gt;
&lt;li&gt;&lt;a href=&quot;http://lxr.free-electrons.com/source/net/ipv4/tcp_metrics.c?v=3.10#L536&quot;&gt;http://lxr.free-electrons.com/source/net/ipv4/tcp_metrics.c?v=3.10#L536&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://tools.ietf.org/html/rfc6191#page-3&quot;&gt;https://tools.ietf.org/html/rfc6191#page-3&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://www.isi.edu/touch/pubs/infocomm99/infocomm99-web/&quot;&gt;http://www.isi.edu/touch/pubs/infocomm99/infocomm99-web/&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://vincent.bernat.im/en/blog/2014-tcp-time-wait-state-linux.html#summary&quot;&gt;https://vincent.bernat.im/en/blog/2014-tcp-time-wait-state-linux.html#summary&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.ietf.org/rfc/rfc1323.txt&quot;&gt;https://www.ietf.org/rfc/rfc1323.txt&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;

</content>
 </entry>
 
 <entry>
   <title>flannel vxlan implementation</title>
   <link href="http://wangtaox.github.io/2016/07/29/flannel-vxlan.html"/>
   <updated>2016-07-29T00:00:00+08:00</updated>
   <id>http://wangtaox.github.io/2016/07/29/flannel-vxlan</id>
   <content type="html">&lt;p&gt;flannelæ˜¯&lt;a href=&quot;https://coreos.com/&quot;&gt;coreos&lt;/a&gt;ä¸º&lt;a href=&quot;http://kubernetes.io/&quot;&gt;kubernets&lt;/a&gt;æä¾›çš„ç½‘ç»œè§£å†³æ–¹æ¡ˆï¼Œä¸»è¦ä¸ºæ‰“é€šè·¨èŠ‚ç‚¹çš„å®¹å™¨é€šä¿¡ï¼Œå…¶ä¸­vxlanæ¨¡å¼ä¸ºflannelå®ç°çš„ä¸€ç§åç«¯æ¨¡å¼ï¼Œå…¶ä»–æ¨¡å¼è¿˜åŒ…æ‹¬&lt;strong&gt;udp&lt;/strong&gt;,
&lt;strong&gt;host-gw&lt;/strong&gt;ç­‰ï¼Œå¯ä»¥é€šè¿‡&lt;a href=&quot;https://github.com/coreos/flannel&quot;&gt;flannel&lt;/a&gt;å®˜ç½‘äº†è§£æ›´å¤šä¿¡æ¯ã€‚&lt;/p&gt;

&lt;h3&gt;linux vxlanå·¥ä½œåŸç†&lt;/h3&gt;

&lt;p&gt;flannelçš„vxlanæ¨¡å¼ä½¿ç”¨çš„æ˜¯åŸç”Ÿçš„linux vxlanå®ç°ï¼Œå› æ­¤äº†è§£linux vxlanå·¥ä½œåŸç†å¯¹äºç†è§£flannelçš„ä»£ç å®ç°å¾ˆæœ‰å¸®åŠ©ã€‚&lt;/p&gt;

&lt;p&gt;åœ¨linux vxlanä¸­ï¼Œä¸»è¦æœ¯è¯­:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;L3 Miss: ç›®æ ‡IPåœ¨é‚»å±…è¡¨ä¸­æœªæ‰¾åˆ° (IP Missï¼Œæ‰€ä»¥æ‰å«L3 Misså—ï¼Ÿ)&lt;/li&gt;
&lt;li&gt;L2 Miss: ç›®æ ‡MACåœ¨vxlan FDBä¸­æœªæ‰¾åˆ°å¯¹åº”é¡¹ (2å±‚çš„Miss)&lt;/li&gt;
&lt;li&gt;NOLEARNING: ç¦æ­¢æ´ªæ³›æ•°æ®åŒ… (åœ¨FDBä¸­æœªæ‰¾åˆ°ç›¸åº”è¡¨é¡¹)&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;&lt;strong&gt;vxlan fdb&lt;/strong&gt; ä¸»è¦æ˜ å°„ç›®æ ‡MACåˆ°vtep IPã€‚&lt;/p&gt;

&lt;p&gt;å¦‚å›¾ &lt;img src=&quot;/media/files/2016/08/01/linux_vxlan.svg&quot; alt=&quot;flannel-ovs&quot; /&gt;&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;shell&quot;&gt;åˆ›å»ºvxlan device
$ip link add vxlan0 type vxlan id 42 group 239.1.1.1 dev eth0
$ip link set vxlan0 address 54:8:20:0:0:A
$ip address add 10.10.10.1 dev vxlan0
$ip link set up vxlan0
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;hostï¼A 10.10.10.1 ping host-B 10.10.11.1&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;shell&quot;&gt;Host-A $ping 10.10.11.1
&lt;/code&gt;&lt;/pre&gt;

&lt;ol&gt;
&lt;li&gt;host-A vxlan0æ¥å£ç”Ÿæˆarpè¯·æ±‚10.10.11.1çš„macåœ°å€&lt;/li&gt;
&lt;li&gt;vxlan é©±åŠ¨å°è£…æ·»åŠ VNI headerï¼Œæ²¡æœ‰å·²çŸ¥çš„ç›®çš„macï¼Œä½¿ç”¨å¤šæ’­åœ°å€&lt;/li&gt;
&lt;li&gt;eth0 å‘å‡ºæ•°æ®åŒ…&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;åœ¨hostï¼Bä¸Šï¼Œ&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;hostï¼Bæ”¶åˆ°æ•°æ®åŒ…ç„¶åè½¬å‘ç»™ç›¸åº”çš„udpç«¯å£(vxlan)&lt;/li&gt;
&lt;li&gt;vxlané©±åŠ¨è§£å°è£…ï¼Œvxlan0æ¥æ”¶åˆ°arp requeståŒ…ï¼Œå¹¶ç”Ÿæˆç›¸åº”çš„arp replyåŒ…ï¼Œæ·»åŠ ç›¸åº”çš„vxlan headerï¼Œç›®çš„macä¸º56:bb:01:0f:cb:A&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;è¿™æ ·åœ¨host-Bçš„fdbä¸­ï¼Œä¼šå­¦åˆ°56:bb:01:0f:cb:Aåˆ°è½¬å‘è§„åˆ™ï¼Œå¦‚ä¸‹:&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;shell&quot;&gt;Host-B $bridge fdb show dev vxlan0
56:bb:01:0f:cb:A dev vxlan0 dst 192.168.1.10 self
0:0:0:0:0:0 dev vxlan0 dst 239.1.1.1 via eth0 self permanent
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ç¬¬äºŒæ¡è§„åˆ™å°±æ˜¯åœ¨ç›®çš„macä¸ºæ­¢æ—¶ä½¿ç”¨å¤šæ’­åœ°å€çš„ç›¸åº”è§„åˆ™ã€‚&lt;/p&gt;

&lt;h3&gt;flannelå®ç°æ–¹å¼&lt;/h3&gt;

&lt;p&gt;å› ä¸ºflannelæ˜¯ä¸ºk8sæä¾›çš„ç½‘ç»œè§£å†³æ–¹æ¡ˆï¼Œè€Œåœ¨k8sä¸­ï¼Œæ¯ä¸€å°hostä¼šåˆ†é…ä¸€ä¸ªç½‘æ®µï¼Œè¯¥ç½‘æ®µæ‰€æœ‰å¯åŠ¨çš„å®¹å™¨å‡åœ¨è¿™å°æœºå™¨ä¸Šï¼Œæ‰€ä»¥ï¼Œå¯¹äºflnanelæ¥è¯´ï¼Œå¾ˆå¤šä¿¡æ¯éƒ½æ˜¯å·²çŸ¥çš„ï¼Œå¯ä»¥ç®€åŒ–flannelçš„vxlan fdb(ä¸éœ€è¦å¤„ç†æœªçŸ¥çš„MACåœ°å€æƒ…å†µ)ä»¥åŠç›¸åº”çš„ä»£ç å®ç°ã€‚&lt;/p&gt;

&lt;p&gt;åœ¨flannelä¸­ï¼Œflannelä¼šåœ¨æ¯ä¸€å°å¯åŠ¨äº†flannel agentdçš„æœºå™¨ä¸Šåˆ›å»ºä¸€ä¸ªvxlan device(ä¸Šè¿°çš„vxlan0)ï¼Œåç§°æ˜¯flannel.1(1ä¸ºvniå·)ï¼Œflannel agentä¼šæ ¹æ®åˆ†é…çš„ç½‘æ®µä¿¡æ¯å’Œvxlan deviceä¿¡æ¯(vxlan deviceçš„macåœ°å€)ï¼ŒåŠ¨æ€çš„ä¿®æ”¹hostä¸Šçš„é‚»å±…è¡¨ï¼Œå¹¶ç»“åˆvxlan deviceçš„fdbå®ç°è·¨ä¸»æœºçš„dockerå®¹å™¨çš„é€šä¿¡ã€‚&lt;/p&gt;

&lt;h4&gt;ä¸€ä¸ªä¾‹å­&lt;/h4&gt;

&lt;p&gt;flannelçš„ç½‘æ®µåˆ†é…ä¿¡æ¯æ˜¯é€šè¿‡etcd è®°å½•çš„ï¼Œåœ¨etcdä¸­è®¾ç½®ç›¸åº”ä¿¡æ¯:&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;shell&quot;&gt;etcd $etcdctl get /flannel/network/config
{ &quot;Network&quot;: &quot;10.10.0.0/16&quot;, &quot;Backend&quot;: { &quot;Type&quot;: &quot;vxlan&quot;, &quot;VNI&quot;: 1 } }
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;åœ¨host-Aä¸Šè¿è¡Œflannel agentï¼Œagentåœ¨etcdä¸­åˆ†é…ç½‘æ®µ10.10.10.0/24ï¼Œagentåˆ›å»ºflannel.1è®¾å¤‡æ¥å£ï¼Œé…ç½®IP 10.10.10.0 MAC 56:bb:01:0f:cb:Aï¼Œé…ç½®è·¯ç”±ï¼Œæ•´ä¸ªå¤§æ®µé€šè¿‡flannel.1, è¿™æ ·overlayç½‘ç»œæµé‡é€šè¿‡flannel.1è½¬å‘å¤„ç†ï¼Œç„¶åå¯åŠ¨docker0ï¼Œé€šè¿‡æŒ‡å®šbip 10.10.10.1/24å¯åŠ¨ï¼Œè¿™æ ·åœ¨host-Aä¸Šçš„å®¹å™¨ä½¿ç”¨ç½‘æ®µ10.10.10.1/24ã€‚&lt;/p&gt;

&lt;p&gt;åŒç†åœ¨host-Bä¸Šè¿è¡Œflannel agentï¼Œagentè¿›è¡Œçš„ç›¸åº”é…ç½®è¿‡ç¨‹ç±»ä¼¼ã€‚&lt;/p&gt;

&lt;p&gt;æ•´ä¸ªä¾‹å­å¦‚å›¾&lt;img src=&quot;/media/files/2016/08/01/flannel-vxlan.svg&quot; alt=&quot;flannel-vxlan&quot; /&gt;&lt;/p&gt;

&lt;h4&gt;flannel vxlanç›¸åº”å·¥ä½œæµç¨‹&lt;/h4&gt;

&lt;p&gt;ç”±äºflannel agentdçŸ¥é“æ‰€æœ‰çš„ç½‘æ®µåˆ†é…ä¿¡æ¯ä»¥åŠæ¯å°hostä¸Šçš„flannel.1è®¾å¤‡çš„IPï¼ŒMACï¼Œå› æ­¤æ¯ä¸€ä¸ªç½‘æ®µåœ¨è¿›è¡Œvxlan fdbè½¬å‘æ—¶ï¼Œå¯ä»¥ä½¿ç”¨hostä¸Šflannel.1çš„MACåœ°å€ã€‚&lt;/p&gt;

&lt;p&gt;åœ¨host-Aä¸Šï¼Œè¿è¡Œ&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;host-A# bridge fdb show dev flannel.1
56:bb:01:0f:cb:B dst 192.168.1.11 self permanent
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;åœ¨hostï¼Bä¸Šï¼Œè¿è¡Œ&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;host-B# bridge fdb show dev flannel.1
56:bb:01:0f:cb:A dst 192.168.1.10 self permanent
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;å¦‚å›¾c1 ping c2æ—¶ï¼Œå¦‚æœå®¹å™¨c1 IP(10.10.10.2), å®¹å™¨c2 IP(10.10.11.2),
å› ä¸ºhostï¼A çš„é‚»å±…è¡¨é‡Œæ²¡æœ‰c2 IPåˆ°MACè¡¨é¡¹ï¼Œflannel agentä¼šæ”¶åˆ°ç›¸åº”çš„l3 miss(netlink)æ¶ˆæ¯ï¼Œç„¶åflannel agentä¼šååº”å¼çš„è®¾ç½®c2 çš„IPåˆ°MACè¡¨é¡¹ä¸º10.10.11.2-56:bb:01:0f:cb:Bï¼Œè¿™æ ·åœ¨fdbä¸­MAC 56:bb:01:0f:cb:Bå°±å¯¹åº”åˆ°host-Bçš„flannel.1ã€‚&lt;/p&gt;

&lt;p&gt;å› ä¸ºflannelçŸ¥é“å¿…è¦çš„ç½‘ç»œä¿¡æ¯ï¼Œæ‰€ä»¥flannelç›´æ¥æŒ‰æ®µå¤„ç†äº†L3 missçš„æ¶ˆæ¯ï¼ŒL2çš„fdbç›´æ¥åœ¨å¯åŠ¨æ—¶æ ¹æ®etcdä¿¡æ¯é™æ€é…ç½®å¥½ï¼Œè¿™æ ·æ•´ä¸ªç½‘ç»œå°±è¿é€šäº†ã€‚&lt;/p&gt;

&lt;h4&gt;L3 missä»£ç &lt;/h4&gt;

&lt;p&gt;å¦‚ä»£ç ï¼Œåœ¨L3 missä»£ç ä¸­ï¼Œé€šè¿‡missçš„IPåœ¨æ‰€æœ‰æ®µé‡ŒåŒ¹é…ç„¶åè®¾ç½®å¯¹åº”çš„vtepMacï¼Œå³:
ä¸Šè¿°çš„c2 IPæ˜¯å¯¹åº”åˆ°ç½‘æ®µ10.10.11.0/24çš„ï¼Œç„¶åç›¸åº”çš„vtepMACå°±å¯¹åº”åˆ°host-Bçš„flannel.1çš„MACï¼Œä»£ç ä¸­æ˜¯é€šè¿‡è·¯ç”±ä¿¡æ¯è®°å½•çš„ï¼Œä¹Ÿä¿å­˜äº†è®¾å¤‡çš„MACã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;golang&quot;&gt;func (n *network) handleL3Miss(miss *netlink.Neigh) {
    log.Infof(&quot;L3 miss: %v&quot;, miss.IP)

    rt := n.rts.findByNetwork(ip.FromIP(miss.IP))
    if rt == nil {
        log.Infof(&quot;Route for %v not found&quot;, miss.IP)
        return
    }

    if err := n.dev.AddL3(neigh{IP: ip.FromIP(miss.IP), MAC: rt.vtepMAC}); err != nil {
        log.Errorf(&quot;AddL3 failed: %v&quot;, err)
    } else {
        log.Info(&quot;AddL3 succeeded&quot;)
    }
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;L2çš„ä»£ç ä¹Ÿå¯ä»¥åœ¨è¯¥å‡½æ•°&lt;a href=&quot;https://github.com/coreos/flannel/blob/master/backend/vxlan/network.go&quot;&gt;æ‰€åœ¨æ–‡ä»¶&lt;/a&gt;ä¸­æ‰¾åˆ°ã€‚&lt;/p&gt;

&lt;h4&gt;å‚è€ƒèµ„æ–™&lt;/h4&gt;

&lt;ol&gt;
&lt;li&gt;&lt;a href=&quot;http://events.linuxfoundation.org/sites/events/files/slides/2013-linuxcon.pdf&quot;&gt;http://events.linuxfoundation.org/sites/events/files/slides/2013-linuxcon.pdf&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://lartc.org/howto/lartc.kernel.obscure.html&quot;&gt;http://lartc.org/howto/lartc.kernel.obscure.html&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://hustcat.github.io/vxlan-l3miss-problem/&quot;&gt;http://hustcat.github.io/vxlan-l3miss-problem/&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;

</content>
 </entry>
 
 <entry>
   <title>max-widthå’Œwidth</title>
   <link href="http://wangtaox.github.io/2016/07/08/max-width-and-width.html"/>
   <updated>2016-07-08T00:00:00+08:00</updated>
   <id>http://wangtaox.github.io/2016/07/08/max-width-and-width</id>
   <content type="html">&lt;p&gt;ä»¥ä¸‹max-widthåŠwidthä½¿ç”¨æ–¹å¼åŒºåˆ«:&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;css&quot;&gt;.modal-one {
    ...
    width: 800px;
    max-width: 100%;
}

or

.modal-two {
    ...
    width: 100%;
    max-width: 800px;
}
&lt;/code&gt;&lt;/pre&gt;

&lt;h4&gt;Scenario 1: parent is wider than 800px&lt;/h4&gt;

&lt;p&gt;parent is 1000px wide&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;&lt;code&gt;.modal-one&lt;/code&gt; æ˜¾ç¤ºwidthä¸º800px, max-widthä¸º1000px, widthæœªè¶…è¿‡max-width, åˆ™widthæœ€ç»ˆä¸º800px&lt;/li&gt;
&lt;li&gt;&lt;code&gt;.modal-two&lt;/code&gt; æ˜¾ç¤ºwidthä¸º1000px, max-widthä¸º800px, widthè¶…è¿‡äº†max-width, åˆ™widthæœ€ç»ˆä¸º800px&lt;/li&gt;
&lt;/ol&gt;


&lt;h4&gt;Scenario 2: parent is smaller than 800px&lt;/h4&gt;

&lt;p&gt;parent is 460px wide&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;&lt;code&gt;.modal-one&lt;/code&gt; æ˜¾ç¤ºwidthä¸º800px, max-widthä¸º460px, widthè¶…è¿‡max-width, åˆ™widthæœ€ç»ˆä¸º460px&lt;/li&gt;
&lt;li&gt;&lt;code&gt;.modal-two&lt;/code&gt; æ˜¾ç¤ºwidthä¸º460px, max-widthä¸º800px, widthæœªè¶…è¿‡max-width, åˆ™widthæœ€ç»ˆä¸º460px&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;å› æ­¤, ä¸€ä¸ªå…ƒç´ å¦‚æœwidthå¤§äºmax-width, max-widthæ˜¯é«˜äºwidthçš„ã€‚&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>&quot;CSS secrets&quot; Reading Notes</title>
   <link href="http://wangtaox.github.io/2016/05/14/css-secret-reading-notes.html"/>
   <updated>2016-05-14T00:00:00+08:00</updated>
   <id>http://wangtaox.github.io/2016/05/14/css-secret-reading-notes</id>
   <content type="html">&lt;h3&gt;currentColor&lt;/h3&gt;

&lt;p&gt;In css3, we got a special new color keyword &lt;strong&gt;currentColor&lt;/strong&gt;, which always resolves to the value of the &lt;strong&gt;color&lt;/strong&gt; property, make it &lt;strong&gt;the first ever variable&lt;/strong&gt; in css.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;CSS&quot;&gt;.dont-do-this {
  height: 2em;
  width: 1em;
  background: currentColor;
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;It will become even more useful when we get functions to manipulate colors in native css.&lt;/p&gt;

&lt;h3&gt;Use shorthands wisely&lt;/h3&gt;

&lt;pre&gt;&lt;code class=&quot;CSS&quot;&gt;.positive-bg {
  background: blue;
  /*background-color: blue;*/
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;It is good defensive coding and future-proofing to use them, unless we intentionally want to use cascaded properties.&lt;/p&gt;

&lt;h3&gt;background-clip&lt;/h3&gt;

&lt;pre&gt;&lt;code class=&quot;CSS&quot;&gt;.photo-box {
  border: .4em solid rgba(255, 255, 255, .5);
  border-radius: .4em;
  font-size: 120%;
  line-height: 1.5;
  width: 720px;
  background: rgba(255, 255, 255);
  background-clip: padding-box;
}
&lt;/code&gt;&lt;/pre&gt;

&lt;h3&gt;outline&lt;/h3&gt;

&lt;p&gt;&lt;strong&gt;outline&lt;/strong&gt; do not fellow the elementsâ€™s rounding but &lt;strong&gt;box-shadow&lt;/strong&gt; do&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;css&quot;&gt;.box {
  background: blue;
  border-radius: .8em;
  padding: 1em;
  box-shadow: 0 0 0 .8em red;
  outline: .8em solid red;
}
&lt;/code&gt;&lt;/pre&gt;

&lt;h3&gt;linear-gradient&lt;/h3&gt;

&lt;pre&gt;&lt;code class=&quot;css&quot;&gt;.bg {
  background: linear-gradient(red 20%, blue 80%);
  ....
  /* 80% ï¼ 20% is the length of gradient area */
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;If we set the color position at 0, it means its position is set to where the previous one stop.&lt;/p&gt;

&lt;h3&gt;box-shadow&lt;/h3&gt;

&lt;pre&gt;&lt;code class=&quot;css&quot;&gt;.box {
  box-shadow: 0 0 10px blue;
}
&lt;/code&gt;&lt;/pre&gt;

&lt;h3&gt;z-index&lt;/h3&gt;

&lt;p&gt;First of all, z-index only works on positioned elements. If you try to set a z-index on an element with no position specified, it will do nothing. Secondly, z-index values can create stacking contexts.&lt;/p&gt;

&lt;p&gt;Every stacking context has a single HTML element as its root element. When a new stacking context is formed on an element, that stacking context confines all of its child elements to a particular place in the stacking order, That means that if an element is contained in a stacking context at the bottom of the stacking order, there is no way to get it to appear in front of another element in a different stacking context that is higher in the stacking order, even with a z-index of a billion!&lt;/p&gt;

&lt;p&gt;New stacking contexts can be formed on an element in one of three ways:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;When an element is the root element of a document (the &lt;strong&gt;html&lt;/strong&gt; element)&lt;/li&gt;
&lt;li&gt;When an element has a position value other than static and a z-index value other than auto&lt;/li&gt;
&lt;li&gt;When an element has an opacity value less than 1&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;In addition to opacity, several newer CSS properties also create stacking contexts. These include: transforms, filters, css-regions, paged media, and possibly others. As a general rule, it seems that if a CSS property requires rendering in an offscreen context, it must create a new stacking context.&lt;/p&gt;

&lt;p&gt;Here are the basic rules to determine stacking order within a single stacking context (from back to front):&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;The stacking contextâ€™s root element&lt;/li&gt;
&lt;li&gt;Positioned elements (and their children) with negative z-index values (higher values are stacked in front of lower values; elements with the same value are stacked according to appearance in the HTML)&lt;/li&gt;
&lt;li&gt;Non-positioned elements (ordered by appearance in the HTML)&lt;/li&gt;
&lt;li&gt;Positioned elements (and their children) with a z-index value of auto (ordered by appearance in the HTML)&lt;/li&gt;
&lt;li&gt;Positioned elements (and their children) with positive z-index values (higher values are stacked in front of lower values; elements with the same value are stacked according to appearance in the HTML)&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;Note: positioned elements with negative z-indexes are ordered first within a stacking context, which means they appear behind all other elements. Because of this, it becomes possible for an element to appear behind its own parent, which is normally not possible. This will only work if the elementâ€™s parent is in the same stacking context and is not the root element of that stacking context.&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>&quot;flip&quot;åŠ¨ç”»</title>
   <link href="http://wangtaox.github.io/2016/03/28/flip.html"/>
   <updated>2016-03-28T00:00:00+08:00</updated>
   <id>http://wangtaox.github.io/2016/03/28/flip</id>
   <content type="html">&lt;h3&gt;flipåŠ¨ç”»&lt;/h3&gt;

&lt;ol&gt;
&lt;li&gt;first: å…ƒç´ åœ¨åŠ¨ç”»ä¸­çš„åˆå§‹çŠ¶æ€&lt;/li&gt;
&lt;li&gt;last: å…ƒç´ çš„åŠ¨ç”»çš„ç»“æŸçŠ¶æ€&lt;/li&gt;
&lt;li&gt;invert: è®¡ç®—firstå’ŒlastçŠ¶æ€çš„å·®å€¼ï¼Œç„¶åè®¾ç½®ç›¸åº”çš„å±æ€§(transform, opacityç­‰)ï¼Œä½¿å…ƒç´ åœ¨åˆå§‹çŠ¶æ€ã€‚&lt;/li&gt;
&lt;li&gt;play: è§¦å‘æ•´ä¸ªåŠ¨ç”»&lt;/li&gt;
&lt;/ol&gt;


&lt;h4&gt;ä¸€ä¸ªä¾‹å­ğŸŒ°&lt;/h4&gt;

&lt;pre&gt;&lt;code class=&quot;html&quot;&gt;&amp;lt;head&amp;gt;
  &amp;lt;style media=&quot;screen&quot;&amp;gt;
    body {
    }

    .container {
      width: 100%;
      height: 100%;
      margin: 0 auto;
      background: #BBDEFB;
      position: relative;
    }

    .circle {
      width: 100px;
      height: 100px;
      border-radius: 100%;
      background-color: #E1BEE7;
      position: absolute;
      top: 10px;
      left: 10px;
    }

    .circle-end {
      top: auto;
      left: auto;
      bottom: 10px;
      right: 10px;
    }

  &amp;lt;/style&amp;gt;
&amp;lt;/head&amp;gt;

&amp;lt;body&amp;gt;
  &amp;lt;button type=&quot;button&quot; name=&quot;button&quot; onclick=&quot;doAnimate()&quot;&amp;gt;Animate&amp;lt;/button&amp;gt;
  &amp;lt;div class=&quot;container&quot;&amp;gt;
    &amp;lt;div class=&quot;circle&quot;&amp;gt;
    &amp;lt;/div&amp;gt;
  &amp;lt;/div&amp;gt;
  &amp;lt;script type=&quot;text/javascript&quot;&amp;gt;
  function doAnimate() {
    var node = document.getElementsByClassName(&#39;circle&#39;)[0]

    //è®¡ç®—åˆå§‹å±æ€§
    var first = node.getBoundingClientRect()
    node.classList.add(&#39;circle-end&#39;)
    //è®¡ç®—ç»“æŸå±æ€§
    var last = node.getBoundingClientRect()

    //invert
    var invertX = first.left - last.left
    var invertY = first.top - last.top

    node.style.transform = &#39;translate(&#39; + invertX + &#39;px,&#39; + invertY + &#39;px)&#39;
    node.style.transition = &#39;transform 0s&#39;

    requestAnimationFrame(function(node) {
      return function() {

        //è§¦å‘åŠ¨ç”»
        node.style.transition = &#39;all 1s&#39;;
        node.style.transform  = &#39;&#39;;
        console.log(node)
      }
    }(node))
  }

  &amp;lt;/script&amp;gt;
&amp;lt;/body&amp;gt;
&lt;/code&gt;&lt;/pre&gt;

&lt;h4&gt;requestAnimationFrameå‡½æ•°&lt;/h4&gt;

&lt;p&gt;&lt;a href=&quot;https://developer.mozilla.org/en-US/docs/Web/API/window/requestAnimationFrame&quot;&gt;requestAnimationFrame&lt;/a&gt;å‡½æ•°ä¸»è¦å‘Šè¯‰æµè§ˆå™¨åœ¨é‡ç»˜æ¯ä¸€å¸§åŠ¨ç”»æ—¶ï¼Œå¯ä»¥è¿è¡Œç”¨æˆ·å®šä¹‰çš„ä»£ç ï¼Œå¯ä»¥è¿›è¡Œç›¸åº”çš„è®¡ç®—ç­‰ç­‰ã€‚&lt;/p&gt;

&lt;h4&gt;å‚è€ƒèµ„æ–™&lt;/h4&gt;

&lt;ol&gt;
&lt;li&gt;&lt;a href=&quot;https://medium.com/developers-writing/animating-the-unanimatable-1346a5aab3cd#.86itpf3ga&quot;&gt;Animating the Unanimatable.&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://aerotwist.com/blog/flip-your-animations/&quot;&gt;FLIP Your Animations&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;

</content>
 </entry>
 
 <entry>
   <title>ç†è§£javascript promise</title>
   <link href="http://wangtaox.github.io/2016/03/04/promise.html"/>
   <updated>2016-03-04T00:00:00+08:00</updated>
   <id>http://wangtaox.github.io/2016/03/04/promise</id>
   <content type="html">&lt;h3&gt;so promise ï¼Ÿ&lt;/h3&gt;

&lt;p&gt;promiseï¼Œç¿»è¯‘è¿‡æ¥å°±æ˜¯æ‰¿è¯ºçš„æ„æ€ï¼Œåœ¨javascriptä¸­ï¼Œpromiseæ˜¯ä¸€ä¸ªå…³äºå¼‚æ­¥æ“ä½œçš„ç»“æœçš„â€œæ‰¿è¯ºâ€,
å¯ä»¥åœ¨&lt;a href=&quot;https://promisesaplus.com/&quot;&gt;promise A+ spec&lt;/a&gt;ä¸­äº†è§£æ›´å¤šå…³äºpromiseçš„ä¿¡æ¯ã€‚&lt;/p&gt;

&lt;p&gt;åœ¨æ­¤ç¿»è¯‘äº†pouchdbä¸­å…³äºpromiseçš„åšå®¢ï¼Œä»¥åŠ æ·±å¯¹promiseçš„ç†è§£ã€‚&lt;a href=&quot;https://twitter.com/nolanlawson&quot;&gt;ä½œè€…&lt;/a&gt;åœ¨æ¨ä¸Šå‘äº†ä¸€æ®µå…³äºpromiseçš„ä»£ç ï¼Œå¦‚ä¸‹:&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;javascript&quot;&gt;//case 1
doSomething().then(function() {
    return doSomethingElse()
})
//case 2
doSomething().then(function() {
    doSomethingElse()
})
//case 3
doSomething().then(doSomethingElse())
//case 4
doSomething().then(doSomethingElse)
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;æ³¨æ„: &lt;code&gt;doSomething&lt;/code&gt;åŠ&lt;code&gt;doSomethingElse&lt;/code&gt;éƒ½æ˜¯ä¸€ä¸ªå‡½æ•°å¹¶è¿”å›æ–°çš„promise.&lt;/p&gt;

&lt;p&gt;çŸ¥é“å‡ ä¸ªcaseçš„åŒºåˆ«ä¹ˆ? #@!...ä»¥ä¸‹ä»£ç å¯èƒ½ä¼šä½¿ç”¨ä¸€äº›ES6è¯­æ³•ã€‚&lt;/p&gt;

&lt;h3&gt;å‘1: å›è°ƒé‡‘å­—å¡”&lt;/h3&gt;

&lt;pre&gt;&lt;code class=&quot;javascript&quot;&gt;getUsersFromRESTAPI().then((resultOfUsers) =&amp;gt; {
    resultOfUsers.forEach((user) =&amp;gt; {
        localStorageWithPromise.put(user).then(() =&amp;gt; {
            console.log(`put user ${user.name} to localStorage success!`)
        }).catch((err) =&amp;gt; {
            console.log(`put user ${user.name} to localStorage failed!`)
            localStorageWithPromise.remove(user.id).then(() =&amp;gt; {
                console.log(`remove possible user info with user id : ${user.id}`)
            })
            ...
        })
    })
})
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;è¿™æ ·å½“æˆ‘ä»¬éœ€è¦å®Œæˆæ›´å¤æ‚çš„ä¸€äº›å›è°ƒæ“ä½œæ—¶ï¼Œå¯èƒ½ä»£ç æ¯”è¿™è¿˜åµŒå¥—å¾—æ·±ï¼Œè¿™æ ·ä»£ç çš„å¯è¯»æ€§ä»¥åŠå¯ç»´æŠ¤æ€§å°±ä¼šå¾ˆç³Ÿç³•ï¼Œè€Œæ›´å¥½çš„ä¹¦å†™
æ–¹å¼åº”è¯¥è¿™æ ·ï¼Œç§°ä¸º&lt;code&gt;ç»„åˆpromise&lt;/code&gt;&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;javascript&quot;&gt;getUsersFromRESTAPI().then(resultOfUsers =&amp;gt; {
    return Promise.all(resultOfUsers.forEach((user) =&amp;gt; {
        return localStorageWithPromise.put(user)
    }))
}).then((resultInfo) =&amp;gt; {
    console.log(`put result ${resultInfo}`)
}).catch((err) =&amp;gt; {
    console.log(err)
})
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;æ›´ç›´è§‚ä¸€ç‚¹ï¼Œæˆ–è®¸æˆ‘ä»¬åº”è¯¥ç»„ç»‡æˆ‘ä»¬çš„promiseè°ƒç”¨é“¾å¦‚ä¸‹é¢è¿™æ ·çš„æ–¹å¼ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;javascript&quot;&gt;operationA().then((resultOfA) =&amp;gt; {
    return doWithResultA(resultOfA)
}).then((resultFromA) =&amp;gt; {
    return operationB(resultFromA)
}).then((resultFromB) =&amp;gt; {
    return operationC(resultFromB)
}).catch(err =&amp;gt; {
    console.log(`any errors &quot;${err}&quot; happened in promise chain`)
})
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;è¿™æ ·æ•´ä¸ªè°ƒç”¨é“¾ä¼šæ¯”è¾ƒæ¸…æ™°ï¼Œä¸”å¯ä»¥ç»Ÿä¸€çš„&lt;code&gt;catch&lt;/code&gt;é”™è¯¯å¹¶å¤„ç†ã€‚&lt;/p&gt;

&lt;h3&gt;å‘2: forEachä¸promise&lt;/h3&gt;

&lt;p&gt;æ¯”å¦‚å¦‚ä¸‹çš„æ“ä½œ:&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;javascript&quot;&gt;getUsersFromRESTAPI().then(resultOfUsers =&amp;gt; {
    resultOfUsers.forEach(user =&amp;gt; {
        user.remove()
    })
}).then(() =&amp;gt; {
    //ä»¥ä¸ºå·²ç»åˆ é™¤äº†æ‰€æœ‰ç”¨æˆ·
})
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;å¾ˆå¤šæ—¶å€™æˆ‘ä»¬ä»¥ä¸ºè¿™æ ·å†™å°±å¯ä»¥äº†ï¼Œå…¶å®æ˜¯é”™è¯¯çš„ï¼Œç¬¬äºŒä¸ªthenå›è°ƒå¹¶ä¸ä¼šç­‰å¾…æ‰€æœ‰userè¢«åˆ é™¤æ‰æ‰§è¡Œï¼Œå› ä¸ºåœ¨ç¬¬ä¸€ä¸ªthenå›è°ƒä¸­ï¼Œå‡½æ•°è¿”å›
çš„æ˜¯&lt;code&gt;undefined&lt;/code&gt;, æ‰€ä»¥è¿™æ ·çš„å†™æ³•å°±ä¼šå­˜åœ¨bug, æ­£ç¡®çš„å†™æ³•åº”è¯¥å¦‚ä¸‹:&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;javascript&quot;&gt;getUsersFromRESTAPI().then(resultOfUsers =&amp;gt; {
    return Promise.all(resultOfUsers.forEach(user =&amp;gt; {
        return user.remove()
    }))
}).then(() =&amp;gt; {
    console.log(&quot;all users has been deleted.&quot;)
})
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;åœ¨ç¬¬ä¸€ä¸ªthenå›è°ƒä¸­è¿”å›äº†promiseï¼Œå¹¶ä½¿ç”¨äº†&lt;code&gt;promise.all&lt;/code&gt;, æ³¨æ„&lt;code&gt;user.remove&lt;/code&gt;ä¹Ÿæ˜¯è¿”å›promiseçš„ã€‚&lt;/p&gt;

&lt;h3&gt;å‘3: å¿˜è®°catché”™è¯¯&lt;/h3&gt;

&lt;p&gt;æˆ‘ä»¬ä¸åº”è¯¥å»å‡è®¾æˆ‘ä»¬çš„promiseä¸è¿”å›ä»»ä½•é”™è¯¯ï¼Œåº”è¯¥åœ¨promiseè°ƒç”¨ä¸­éƒ½è¿›è¡Œæ­£ç¡®çš„é”™è¯¯å¤„ç†.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;javascript&quot;&gt;promise1().then(() =&amp;gt; {
    return opReturnPromise2()
}).then(() =&amp;gt; {
    return opReturnPromise3()
}).catch(err =&amp;gt; {
    //handle errors properly.
})
&lt;/code&gt;&lt;/pre&gt;

&lt;h3&gt;promiseä¸­çš„è¿”å›å€¼&lt;/h3&gt;

&lt;pre&gt;&lt;code class=&quot;javascript&quot;&gt;promise1().then(() =&amp;gt; {
    opReturnPromise2()
}).then(() =&amp;gt; {
    opReturnPromise3()
}).catch(err =&amp;gt; {
    //handle errors properly.
})
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;æœ‰ä»€ä¹ˆé—®é¢˜ä¹ˆï¼Ÿè¿™å„¿åœ¨promiseçš„å›è°ƒä¸­&lt;code&gt;è¿”å›å€¼å­˜åœ¨é—®é¢˜&lt;/code&gt;, åœ¨promiseä¸­ï¼Œthen()å›è°ƒå¯ä»¥è¿”å›:&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;è¿”å›å¦ä¸€ä¸ªpromise.&lt;/li&gt;
&lt;li&gt;è¿”å›ä¸€ä¸ªå€¼(æˆ–è€…undefined).&lt;/li&gt;
&lt;li&gt;è¿”å›ä¸€ä¸ªé”™è¯¯.&lt;/li&gt;
&lt;/ol&gt;


&lt;h4&gt;è¿”å›å¦ä¸€ä¸ªpromise&lt;/h4&gt;

&lt;p&gt;è¿™å°±æ˜¯ä¸Šé¢æåˆ°çš„&lt;code&gt;ç»„åˆpromise&lt;/code&gt;.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;javascript&quot;&gt;promise1().then(() =&amp;gt; {
    return opReturnPromise2()
}).then(() =&amp;gt; {
    return opReturnPromise3()
}).catch(err =&amp;gt; {
    //handle errors properly.
})
&lt;/code&gt;&lt;/pre&gt;

&lt;h4&gt;è¿”å›ä¸€ä¸ªå€¼(æˆ–è€…undefined)&lt;/h4&gt;

&lt;pre&gt;&lt;code class=&quot;javascript&quot;&gt;getUserFromRESTAPI(userName).then((userInfo) =&amp;gt; {
    if (FriendsCache[userInfo.id]) {
        return FriendsCache[userInfo.id]
    }
    return getUserFriends(userInfo.id)
}).then((friends) =&amp;gt; {
    console.log(friends)
}).catch(err =&amp;gt; {
    console.log(err)
})
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;è¿™æ ·å†™æ˜¯ä¸æ˜¯å¾ˆæ¸…æ™°ï¼Œåœ¨ç¬¬äºŒä¸ªå¤„ç†friendsçš„thenå›è°ƒä¸­ï¼Œæˆ‘ä¸éœ€è¦å…³å¿ƒfriendsæ˜¯åœ¨cacheä¸­è¿˜æ˜¯ä»APIä¸­è·å–çš„ï¼Œå¤„ç†å¾—åˆ°çš„å¥½å‹åˆ—è¡¨å³å¯ã€‚
ç”±äºåœ¨javascriptä¸­ï¼Œå‡½æ•°ä¸æ˜¾è§†çš„è¿”å›ä»»ä½•å€¼ï¼Œåˆ™è¿”å›undefinedï¼Œæ‰€æœ‰åœ¨promiseçš„thenå›è°ƒä¸­ï¼Œå»ºè®®æ€»æ˜¯è¿”å›ä¸€ä¸ªå€¼æˆ–è€…æŠ›å‡ºé”™è¯¯ã€‚&lt;/p&gt;

&lt;h4&gt;è¿”å›ä¸€ä¸ªé”™è¯¯&lt;/h4&gt;

&lt;pre&gt;&lt;code class=&quot;javascript&quot;&gt;getUserFromRESTAPI(userName).then((userInfo) =&amp;gt; {
    if (isLoggedout(userInfo.id)) {
        throw new Error(&quot;logged out!&quot;)
    }
    if (FriendsCache[userInfo.id]) {
        return FriendsCache[userInfo.id]
    }
    return getUserFriends(userInfo.id)
}).then((friends) =&amp;gt; {
    console.log(friends)
}).catch(err =&amp;gt; {
    console.log(err)
})
&lt;/code&gt;&lt;/pre&gt;

&lt;h3&gt;å·§ç”¨Promose.resolve&lt;/h3&gt;

&lt;p&gt;ä½¿ç”¨promiseåŒ…è£…åŒæ­¥çš„ä»£ç ä½¿å…¶å¼‚æ­¥åŒ–ï¼Œå¹¶è¿›è¡Œé”™è¯¯å¤„ç†ã€‚å¯¹äºåŒæ­¥çš„æ“ä½œï¼Œpromiseä¹Ÿå¯ä»¥æä¾›å¾ˆå¤šå¸®åŠ©ï¼Œæ¯”å¦‚:&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;javascript&quot;&gt;let caculateSomethingAndMayThrowError  = (x, y) =&amp;gt; {
    if (x &amp;lt; y) {
        throw new Error(&quot;x &amp;lt; y&quot;)
    }
    return x - y
}

let wrapAPI2Promise = () =&amp;gt; {
    return Promise.resolve().then(() =&amp;gt; {
        let value = caculateSomethingAndMayThrowError()
        return value
    }).then((value) =&amp;gt; {
        console.log(value)
    }).catch((err) =&amp;gt; {
        console.log(err)
    })
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;åœ¨catchä¸­æˆ‘ä»¬å¯ä»¥å¤„ç†åŒæ­¥å‡½æ•°æŠ›å‡ºçš„å¼‚å¸¸.&lt;/p&gt;

&lt;h3&gt;é¿å…rejectå‡½æ•°ï¼Œä½¿ç”¨catch&lt;/h3&gt;

&lt;p&gt;catchå‡½æ•°å…¶å®æ˜¯ä¸€ä¸ªè¯­æ³•ç³–, å¦‚ä¸‹æ‰€ç¤º:&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;javascript&quot;&gt;promise1().catch((err) =&amp;gt; {})
//equal to
promise1().then(null, (err) =&amp;gt; {})
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ä½†æ˜¯å¦‚ä¸‹çš„ä»£ç å´å¹¶ä¸ä¸€æ ·ï¼Œå¦‚ä¸‹:&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;javascript&quot;&gt;promise1().then(() =&amp;gt; {
    return promise2()
}).catch((err) =&amp;gt; {
    console.log(err)
})

promise1().then(() =&amp;gt; {
    return promise2()
}, (err) =&amp;gt; {
    console.log(err)
})
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ç¬¬ä¸€ä¸ªcatchä¼šå¤„ç†æ•´ä¸ªpromiseé“¾ä¸­çš„å¼‚å¸¸é”™è¯¯ï¼Œä½†æ˜¯ç¬¬äºŒä¸ªå´æ˜¯å¤„ç†promise1çš„å¼‚å¸¸é”™è¯¯ï¼Œå› ä¸ºå®ƒç›¸å½“äºpromise1çš„rejectå‡½æ•°ã€‚
æ‰€ä»¥ä¸€èˆ¬æƒ…å†µä¸‹å»ºè®®åªç”¨catchå‡½æ•°ï¼Œé¿å…ç»™thenä¼ é€’ç¬¬äºŒä¸ªå‚æ•°å¯¼è‡´ç†è§£é”™è¯¯ï¼Œå‡ºç°bugã€‚&lt;/p&gt;

&lt;h3&gt;promiseå·¥å‚å‡½æ•°&lt;/h3&gt;

&lt;p&gt;æœ‰æ—¶å¯ä»¥é€šè¿‡å·¥å‚å‡½æ•°ï¼Œç»„åˆæˆ‘ä»¬çš„promiseé“¾ï¼Œä½†æ˜¯ä¸€å®šè¦æ³¨æ„è¿”å›å€¼, ä¾‹å¦‚:&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;javascript&quot;&gt;//ä¾æ¬¡sleep 1s

let suspendOneSecondFactory = () =&amp;gt; {
    return () =&amp;gt; {
        return new Promise((resolve, reject) =&amp;gt; {
            setTimeout(() =&amp;gt; {
                console.log(&#39;sleep 1s&#39;)
                resolve()
            }, 1000)
        })
    }
}

let result = Promise.resolve()
[1, 2, 3].forEach(() =&amp;gt; {
    result = result.then(suspendOneSecondFactory())
})
result.then(() =&amp;gt; {
    console.log(&quot;the end&quot;)
}).catch(err =&amp;gt; {
    console.log(err)
})
&lt;/code&gt;&lt;/pre&gt;

&lt;h3&gt;æ€»ç»“&lt;/h3&gt;

&lt;p&gt;promiseåœ¨ä½¿ç”¨æ—¶ä¸€å®šè¦æ³¨æ„thenå›è°ƒçš„è¿”å›å€¼ï¼Œä»¥åŠç»„åˆä½¿ç”¨promiseï¼Œå¹¶å°†æ“ä½œå°½é‡æ­¥éª¤åŒ–ï¼Œé‚£æ ·å¯ä»¥ä½¿ç”¨proiseé“¾ç»„åˆå‡ºå„ç§éœ€è¦çš„
ä¾èµ–é“¾å¹¶è¿›è¡Œè°ƒç”¨, å¦‚æœç»™thenè°ƒç”¨ä¼ é€’éå‡½æ•°å€¼ï¼Œåœ¨thenè°ƒç”¨ä¸­ä¼ é€’çš„éå‡½æ•°å€¼ä¼šè¢«è§£æä¸ºnullã€‚&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>React lifecycle hooks notes</title>
   <link href="http://wangtaox.github.io/2016/02/25/react-lifecycle.html"/>
   <updated>2016-02-25T14:42:35+08:00</updated>
   <id>http://wangtaox.github.io/2016/02/25/react-lifecycle</id>
   <content type="html">&lt;h3&gt;Component Life Cycle Hooks&lt;/h3&gt;

&lt;p&gt;React provides a series of life cycle hooks we can tap into each phase of the life cycle, each of the life cycle hooks are called in specific order and at a specific time.&lt;/p&gt;

&lt;h4&gt;componentåˆ›å»º&lt;/h4&gt;

&lt;p&gt;ç»„ä»¶çš„åˆ›å»ºä¸»è¦æ­¥éª¤åŒ…æ‹¬:&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;componentåˆå§‹åŒ–&lt;/li&gt;
&lt;li&gt;component.defaultPropsè·å–componentçš„props&lt;/li&gt;
&lt;li&gt;this.state = ...(ES6çš„class constructorå‡½æ•°)&lt;/li&gt;
&lt;li&gt;componentWillMount()å‡½æ•°&lt;/li&gt;
&lt;li&gt;render()å‡½æ•°&lt;/li&gt;
&lt;li&gt;å­ç»„ä»¶çš„åˆå§‹åŒ–ä»¥åŠç”Ÿå‘½å‘¨æœŸå‡½æ•°&lt;/li&gt;
&lt;li&gt;componentDidMount()å‡½æ•°&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;æ³¨æ„ä¼ é€’propsæ—¶çš„nullå€¼ï¼Œæ¯”å¦‚:&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;javascript&quot;&gt;//right
&amp;lt;Box name={null}&amp;gt; //pass null to props is tricky

//wrong
&amp;lt;Box name={undefined}&amp;gt;

class Box extends React.Componets {
  constructor(props) {
    super(props);
    this.state = { open: false };
  }
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;æ³¨æ„åœ¨constructorå‡½æ•°ä¸­éœ€è¦ç»™stateèµ‹å€¼ï¼Œä¸ç„¶this.stateå°±æ˜¯undefinedäº†.&lt;/p&gt;

&lt;p&gt;å½“propså’Œstateéƒ½è®¾ç½®å¥½åï¼Œå°±ä¼šè¿›å…¥ç¬¬ä¸€ä¸ªç”Ÿå‘½å‘¨æœŸå‡½æ•°componentWillMountï¼Œè®°ä½åœ¨è¯¥å‡½æ•°ä¸­Domè¿˜æœªmountï¼Œå› æ­¤è®¿é—®
this.refsæ˜¯ä¸å…è®¸çš„ï¼Œåœ¨è¯¥å‡½æ•°ä¸­æˆ‘ä»¬å¯ä»¥ä¸ºè°ƒæ•´stateæˆ–è€…ä¸ºç¬¬ä¸€æ¬¡renderåšä¸€äº›å‰æœŸå·¥ä½œï¼Œæ¯”å¦‚æ³¨å†Œä¸€äº›å…¨å±€çš„äº‹ä»¶(window.resize)ã€‚&lt;/p&gt;

&lt;p&gt;It&#39;s important to remember that many Native UI elements do not exist at this point in the life cycle. That means we need to stick to very high-level/global events such as window or document.&lt;/p&gt;

&lt;p&gt;åœ¨renderå‡½æ•°ä¸­ï¼Œæˆ‘ä»¬æ ¹æ®propså’Œstateå¯¹ç»„ä»¶è¿›è¡Œæ¸²æŸ“ï¼Œå› æ­¤ï¼Œrenderåº”è¯¥æ˜¯ä¸€ä¸ªpure functionï¼ŒcomponentUI = render(props, state)ï¼Œåœ¨renderå°±ä¸åº”è¯¥è°ƒç”¨setStateå‡½æ•°äº†ï¼ŒåŒæ—¶ä¹Ÿä¸åº”è¯¥åœ¨renderä¸­æ“ä½œDOM.&lt;/p&gt;

&lt;p&gt;æœ‰å­ç»„ä»¶å­˜åœ¨æ—¶ï¼Œæ¸²æŸ“å­ç»„ä»¶ï¼Œç±»ä¼¼DFSï¼Ÿ&lt;/p&gt;

&lt;p&gt;åœ¨componentDidMountå‡½æ•°ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥è®¿é—®Native UIäº†ï¼Œæ‰€ä»¥åœ¨è¯¥å‡½æ•°ä¸­æ ¹æ®UIè¿›è¡Œä¸€äº›æ“ä½œæ—¶å¯ä»¥çš„ï¼Œæ¯”å¦‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;javascript&quot;&gt;componentDidMount() {
  this.chart = highcharts.Highcharts({
    elem: this.refs.chart,
    ...
  });

  this.table = DataTable.Table({
    ...
  });

  $(.css_class).xxx();
}
&lt;/code&gt;&lt;/pre&gt;

&lt;h4&gt;componentæ›´æ–°&lt;/h4&gt;

&lt;p&gt;ç»„ä»¶çš„æ›´æ–°ä¸»è¦æ­¥éª¤åŒ…æ‹¬:&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;componentWillReceiveProps()å‡½æ•°&lt;/li&gt;
&lt;li&gt;shouldComponentUpdate()å‡½æ•°&lt;/li&gt;
&lt;li&gt;render()å‡½æ•°&lt;/li&gt;
&lt;li&gt;å­ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸå‡½æ•°&lt;/li&gt;
&lt;li&gt;componentWillUpdate()å‡½æ•°&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;componentWillReceiveProps(nextProps)å‡½æ•°ä¼šåœ¨propsä¼ é€’ç»™componentæ—¶è°ƒç”¨ï¼Œå¯ä»¥å¯¹æ¯”propsã€‚&lt;/p&gt;

&lt;p&gt;The core issue with props and componentWillReceiveProps() is how JavaScript provides mutable data structures. Let&#39;s say we have a prop called data and data is an Array.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;javascript&quot;&gt;// psuedo code
this.setState({ data: [1, 2, 3] });

&amp;lt;MyComponent data={ this.state.data } /&amp;gt;
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;jsä¸­Objectæ—¶å¼•ç”¨çš„ï¼Œå› æ­¤åœ¨Reactä¸­è¦æ ¼å¤–æ³¨æ„ã€‚&lt;/p&gt;

&lt;p&gt;The next method in the Update life cycle, is shouldComponentUpdate(). This method allows your Component to exit the Update life cycle if there is no reason to apply a new render. Out of box, the shouldComponentUpdate() is a no-op that returns true. This means every time we start an Update in a Component, we will re-render.
If you recall, React does not deeply compare props by default. When props or state is updated React assumes we need to re-render the content. But, if the props or state have not changed, should we really be re-rendering?&lt;/p&gt;

&lt;p&gt;Once we have determined that we do need to re-render in our Update phase, the componentWillUpdate() will be called. The method is passed in two arguments: nextProps and nextState. The method componentWillUpdate() is similar to componentWillMount(), and many of the same considerations and tasks are the same. The difference being that componentWillUpdate() is called every time a re-render is required and we get access to the next props and state.&lt;/p&gt;

&lt;p&gt;Just like componentWillMount(), this method is called before render(). Because we have not rendered yet, our Component&#39;s access to the Native UI (DOM, etc.) will reflect the old rendered UI. Unlike, componentWillMount() we can technically access refs but it is not recommended because the refs will also be out of date.+&lt;/p&gt;

&lt;p&gt;The componentWillUpdate() is a chance for us to handle configuration changes, update our state and in general prepare for the next render. If we want to access the old props or state, we can call this.props or this.state. We can then compare them to the new values and make changes/calculations as required.&lt;/p&gt;

&lt;p&gt;Continuing the trend of corresponding methods, the componentDidUpdate() is the Update version of componentDidMount(). Once again, we can access the Native UI stack, interact with our refs and if required start another re-render/update.&lt;/p&gt;

&lt;p&gt;When componentDidUpdate() is called, two arguments are passed: prevProps and prevState. This is the inverse of componentWillUpdate(). The passed values are what the values were and accessing this.props and this.state are the current values&lt;/p&gt;

&lt;p&gt;The most common uses of componentDidUpdate() is managing 3rd party UI elements and interacting with the Native UI. When using 3rd Party libraries, like our Chart example, we need to update the UI library with new data.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;javascript&quot;&gt;componentDidUpdate(prevProps, prevState) {
  // only update chart of the data has changed
  if (prevProps.data !== this.props.data) {
    this.chart = c3.load({
      data: this.props.data
    });
  }
}

//Another render pass?
componentDidUpdate(prevProps, prevState) {
  // One possible fix...
  let height = ReactDOM.findDOMNode(this).offsetHeight;
  if (this.state.height !== height ) {
    this.setState({ internalHeight: height });
  }
}
&lt;/code&gt;&lt;/pre&gt;

&lt;h4&gt;componentæŒ‚è½½&lt;/h4&gt;

&lt;p&gt;ç»„ä»¶çš„å¸è½½å’Œæ¸…æ¥šæ­¥éª¤åŒ…æ‹¬:&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;componentWillUnmount()&lt;/li&gt;
&lt;li&gt;å­ç»„ä»¶ç”Ÿå‘½å‘¨æœŸå‡½æ•°&lt;/li&gt;
&lt;li&gt;component GC&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;Just like the rest of our life cycle phases, the Death/Unmount phase has a method hook for us. This method allows us to do some cleanup before we are removed from the UI stack. Typically we want to reverse any setup we did in either componentWillMount() or componentDidMount().&lt;/p&gt;

&lt;p&gt;For example, we would want to unregister any global/system/library events, destroy 3rd party UI library elements, etc. If we don&#39;t take the time to remove events we can create memory leaks in our system or leave bad references laying around.&lt;/p&gt;

&lt;h4&gt;redux&lt;/h4&gt;

&lt;p&gt;redux reducer, æ ¹æ®actionå’Œstateå¾—å‡ºæ–°çš„stateï¼Œ (prevState, action) =&gt; newState, å’Œæˆ‘ä»¬ç†Ÿæ‚‰çš„Array.prototype.reduce(reducer, prevValue)ç±»ä¼¼&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;javascript&quot;&gt;let initiaState = { count: 0 }

//counter example
let actions = [
    {type: &#39;INC&#39;},
    {type: &#39;DEC&#39;},
]

//take actions and state as paramaters, output new state.
function counterReducer(state = initiaState, action) {
    switch(action.type) {
        case &#39;INC&#39;:
            return Object.assign({}, state, {
                count: state.count++
            })
        case &#39;DEC&#39;:
            return Object.assign({}, state, {
                count: state.count--
            })
        default:
            return initiaState
    }
}
console.log(actions.reduce(counterReducer, initiaState))
&lt;/code&gt;&lt;/pre&gt;
</content>
 </entry>
 
 <entry>
   <title>golang grpcå­¦ä¹ </title>
   <link href="http://wangtaox.github.io/2016/02/01/grpc.html"/>
   <updated>2016-02-01T00:00:00+08:00</updated>
   <id>http://wangtaox.github.io/2016/02/01/grpc</id>
   <content type="html">&lt;h3&gt;grpcç®€ä»‹&lt;/h3&gt;

&lt;p&gt;&lt;a href=&quot;http://www.grpc.io/&quot;&gt;grpc&lt;/a&gt;æ˜¯Googleå¼€æºçš„rpcæ¡†æ¶ï¼Œä½¿ç”¨&lt;a href=&quot;https://developers.google.com/protocol-buffers/&quot;&gt;protobuf&lt;/a&gt;è¿›è¡Œæ•°æ®ç¼–ç ï¼Œï¼ŒåŸºäºHttp2åè®®ï¼Œæä¾›äº†å¾ˆå¤šä¼˜åŠ¿ï¼Œæ¯”å¦‚:åŒå‘çš„æ•°æ®æµï¼Œæµæ§åˆ¶ï¼ŒåŒ…å¤´å‹ç¼©ï¼Œå¤šè·¯å¤ç”¨ç­‰ï¼Œè¯¦ç»†ä¿¡æ¯å¯ä»¥å‚è€ƒgrpcå®˜ç½‘ã€‚&lt;/p&gt;

&lt;h3&gt;protobuf3&lt;/h3&gt;

&lt;p&gt;protobufæ˜¯Googleæä¾›çš„ä¸€ä¸ªè·¨è¯­è¨€çš„æ•°æ®ç¼–ç æœºåˆ¶ï¼Œæ”¯æŒå¤šç§è¯­è¨€ï¼Œåœ¨ç»“åˆRPCä½¿ç”¨æ—¶ï¼Œå¯ä»¥èŠ‚çœå¸¦å®½ï¼Œæé«˜ä¼ è¾“æ•ˆç‡ï¼Œgrpcæä¾›äº†protobufçš„ç›¸åº”å·¥å…·ï¼Œè¿™æ ·å°±å¯ä»¥ä½¿ç”¨protoæ–‡ä»¶å®šä¹‰RPCæ¥å£ï¼Œçº¦å®šä¼ è¾“æ•°æ®æ ¼å¼ï¼Œé€šè¿‡ç”Ÿæˆå·¥å…·ç”Ÿæˆç›¸åº”è¯­è¨€çš„æºæ–‡ä»¶ã€‚&lt;/p&gt;

&lt;h3&gt;å®šä¹‰ä¸€ä¸ªæ–‡ä»¶ä¼ è¾“æœåŠ¡&lt;/h3&gt;

&lt;p&gt;ä»¥ä¸‹ä¸ºä¸€ä¸ªæ–‡ä»¶æœåŠ¡çš„protoæ–‡ä»¶å®šä¹‰, file.proto :&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;protocol&quot;&gt;syntax ï¼ &quot;proto3&quot;;

package filetransfer;

//rpcè°ƒç”¨å®šä¹‰
service FileServer {
  rpc GetFile(FileDescriptor) returns (stream FileContent) {}
}

message FileDescriptor {
  string filename = 1;
}

message FileContent {
  bytes content = 1;
  string md5sum = 2;
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;é€šè¿‡å·¥å…·ç”Ÿæˆç›¸åº”è¯­è¨€æºä»£ç ï¼Œä»¥&lt;a href=&quot;http://golang.org&quot;&gt;golang&lt;/a&gt;ä¸ºä¾‹ï¼Œä½¿ç”¨å¦‚ä¸‹å‘½ä»¤:&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;bash&quot;&gt;protoc --go_out=plugins=grpc:. file.proto
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ä»¥ä¸‹æ˜¯æœåŠ¡ç«¯çš„ä»£ç å®ç°:&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;go&quot;&gt;const (
  BUFSIZE = 1024
)

func (am *AgentManager) GetFile(fd *pb.FileDescriptor, stream pb.FileServer_GetFileServer) error {
  filename := fd.Filename

  //make sure file existed.
  fo, err := os.Open(filename)
  if err != nil {
    return ErrNoSuchFile
  }
  defer func() {
      if err := fo.Close(); err != nil {
        panic(err)
      }
  }()

  content := &amp;amp;pb.FileContent {
    Content: make([]byte, BUFSIZE),
    Md5Sum: caculateMd5(filename),
  }
  for {
    n, err := fo.Read(content.Content)
    if err != nil &amp;amp;&amp;amp; err != io.EOF {
      return ErrReadFile
    }
    if n == 0 {
      break
    }

    if err := stream.Send(content); err != nil {
      return err
    }
  }

  //indicate the end of stream.
  return nil
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ä»¥ä¸‹æ˜¯Clientç«¯ä»£ç :&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;go&quot;&gt;
func ReadFile(filename string, conn pb.FileServerClient) error {
  stream, err := conn.GetFile(filename)
  if err != nil {
    panic(err)
  }

  outFd, err := os.Create(filename)
  if err != nil {
    panic(err)
  }
  defer func() {
      if err := outFd.Close(); err != nil {
        panic(err)
      }
  }()

  for {
    content, err := stream.Recv()
    if err == io.EOF {
      break
    }
    if err != nil {
      panic(err)
    }

    if err := outFd.Write(content.Content); err != nil {
      panic(err)
    }
  }

  return nil
}


func checkMd5(filename string, md5 string) bool {
  return caculateMd5(filename) == md5
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ä»£ç æœ‰éƒ¨åˆ†çœç•¥.&lt;/p&gt;

&lt;h3&gt;grpc stream&lt;/h3&gt;

&lt;pre&gt;&lt;code class=&quot;protobuf&quot;&gt;syntax = &quot;proto3&quot;;

package chatservice;

service chatservice {
  //åŒå‘çš„stream
  rpc chat(stream ChatMessage) returns (ChatMessage) {}
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;grpcçš„streamå¯ä»¥æ˜¯åŒå‘çš„ä¹Ÿå¯ä»¥æ˜¯å•å‘çš„ï¼Œåœ¨é€šè¿‡protoæ–‡ä»¶å®šä¹‰æ—¶æŒ‡å®šï¼Œæ¯”å¦‚: ä¹Ÿå¯ä»¥å®ç°å¦‚Chatè¿™æ ·çš„æ¥å£ã€‚&lt;/p&gt;

&lt;h3&gt;å‚è€ƒé“¾æ¥&lt;/h3&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;http://talks.golang.org/2015/gotham-grpc.slide#1&quot;&gt;http://talks.golang.org/2015/gotham-grpc.slide#1&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://coreos.com/blog/gRPC-protobufs-swagger.html&quot;&gt;https://coreos.com/blog/gRPC-protobufs-swagger.html&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/coreos/etcd/blob/master/etcdserver/etcdserverpb/rpc.proto&quot;&gt;https://github.com/coreos/etcd/blob/master/etcdserver/etcdserverpb/rpc.proto&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/gengo/grpc-gateway&quot;&gt;https://github.com/gengo/grpc-gateway&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

</content>
 </entry>
 
 
</feed>
